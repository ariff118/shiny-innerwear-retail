"embroidered mesh bodysuit" = "lingerie",
".*cheekster.*" = "panties",
".*kimono.*" = "sleep wear",
".*gym.*" = "sport",
".*belt.*" = "accessories",
".*one-piece.*" = "swimwear",
".*onepiece.*" = "swimwear",
".*halter.*" = "swimwear",
"high-neck lace-up romper" = "lingerie",
"high-neck wrap" = "swimwear",
"knotted back body wrap top" = "swimwear",
".*lace.*bodysuit.*" = "lingerie",
".*panties.*" = "panties",
".*triangle.*" = "panties",
".*slip.*" = "sleep wear",
"sunnie full coverage" = "bra",
".*one piece.*" = "swimwear",
".*sport.*" = "sport",
"logo elastic short" = "sleepwear",
".*tee.*" = "sleepwear",
"lightly lined macramé high-neck" = "swimwear",
".*racerback.*" = "bra",
".*petal.*" = "accessories"))
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
str_detect(df$product_name, ".*Sport.*")
ifelse(str_detect(df$product_name, ".*Sport.*"),
str_replace(df$category, ".*chill", "sport"), df$category)
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "swimwear",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*brief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshort.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*cami.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories",
".*lingerie.*" = "lingerie",
".*push.*" = "bra",
".*tote.*" = "accessories",
".*hipster.*" = "panties",
".*babydoll.*" = "sleep wear",
"wrap triangle top" = "swimwear",
".*tomgirl.*" = "panties",
"ultimate high waist legging" = "sport",
"ultimate pocket legging" = "sport",
"ultimate yoga legging" = "sport",
".*undies.*" = "panties",
".*tank.*" = "sleep wear",
".*demi.*" = "bra",
".*bustier.*" = "bra",
".*brooke.*" = "bra",
"crochet lace high-neck bodysuit" = "lingerie",
"crochet lace short" = "lingerie",
"cross-back scoop" = "swimwear",
".*teddy.*" = "lingerie",
"daisy lace romper" = "lingerie",
".*sleep.*" = "sleep wear",
"embroidered mesh bodysuit" = "lingerie",
".*cheekster.*" = "panties",
".*kimono.*" = "sleep wear",
".*gym.*" = "sport",
".*belt.*" = "accessories",
".*one-piece.*" = "swimwear",
".*onepiece.*" = "swimwear",
".*halter.*" = "swimwear",
"high-neck lace-up romper" = "lingerie",
"high-neck wrap" = "swimwear",
"knotted back body wrap top" = "swimwear",
".*lace.*bodysuit.*" = "lingerie",
".*panties.*" = "panties",
".*triangle.*" = "panties",
".*slip.*" = "sleep wear",
"sunnie full coverage" = "bra",
".*one piece.*" = "swimwear",
".*sport.*" = "sport",
"logo elastic short" = "sleepwear",
".*tee.*" = "sleepwear",
"lightly lined macramé high-neck" = "swimwear",
".*racerback.*" = "bra",
".*petal.*" = "accessories",
"deep v crop" = "bra"))
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "swimwear",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*brief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshort.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*cami.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories",
".*lingerie.*" = "lingerie",
".*push.*" = "bra",
".*tote.*" = "accessories",
".*hipster.*" = "panties",
".*babydoll.*" = "sleep wear",
"wrap triangle top" = "swimwear",
".*tomgirl.*" = "panties",
"ultimate high waist legging" = "sport",
"ultimate pocket legging" = "sport",
"ultimate yoga legging" = "sport",
".*undies.*" = "panties",
".*tank.*" = "sleep wear",
".*demi.*" = "bra",
".*bustier.*" = "bra",
".*brooke.*" = "bra",
"crochet lace high-neck bodysuit" = "lingerie",
"crochet lace short" = "lingerie",
"cross-back scoop" = "swimwear",
".*teddy.*" = "lingerie",
"daisy lace romper" = "lingerie",
".*sleep.*" = "sleep wear",
"embroidered mesh bodysuit" = "lingerie",
".*cheekster.*" = "panties",
".*kimono.*" = "sleep wear",
".*gym.*" = "sport",
".*belt.*" = "accessories",
".*one-piece.*" = "swimwear",
".*onepiece.*" = "swimwear",
".*halter.*" = "swimwear",
"high-neck lace-up romper" = "lingerie",
"high-neck wrap" = "swimwear",
"knotted back body wrap top" = "swimwear",
".*lace.*bodysuit.*" = "lingerie",
".*panties.*" = "panties",
".*triangle.*" = "panties",
".*slip.*" = "sleep wear",
"sunnie full coverage" = "bra",
".*one piece.*" = "swimwear",
".*sport.*" = "sport",
"logo elastic short" = "sleepwear",
".*tee.*" = "sleepwear",
"lightly lined macramé high-neck" = "swimwear",
".*racerback.*" = "bra",
".*petal.*" = "accessories",
"deep v crop" = "bra",
".*lace dress.*" = "lingerie",
".*hannah.*" = "bra",
"cropped raglan full-zip" = "sport",
".*hineck.*" = "bra",
".*katie.*" = "bra",
".*longline.*" = "bra",
".*lorna jane.*" = "bra",
"mesh-cap-sleeve bodysuit" = "lingerie",
".*move.*" = "sport"))
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "swimwear",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*brief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshort.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*cami.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories",
".*lingerie.*" = "lingerie",
".*push.*" = "bra",
".*tote.*" = "accessories",
".*hipster.*" = "panties",
".*babydoll.*" = "sleep wear",
"wrap triangle top" = "swimwear",
".*tomgirl.*" = "panties",
"ultimate high waist legging" = "sport",
"ultimate pocket legging" = "sport",
"ultimate yoga legging" = "sport",
".*undies.*" = "panties",
".*tank.*" = "sleep wear",
".*demi.*" = "bra",
".*bustier.*" = "bra",
".*brooke.*" = "bra",
"crochet lace high-neck bodysuit" = "lingerie",
"crochet lace short" = "lingerie",
"cross-back scoop" = "swimwear",
".*teddy.*" = "lingerie",
"daisy lace romper" = "lingerie",
".*sleep.*" = "sleep wear",
"embroidered mesh bodysuit" = "lingerie",
".*cheekster.*" = "panties",
".*kimono.*" = "sleep wear",
".*gym.*" = "sport",
".*belt.*" = "accessories",
".*one-piece.*" = "swimwear",
".*onepiece.*" = "swimwear",
".*halter.*" = "swimwear",
"high-neck lace-up romper" = "lingerie",
"high-neck wrap" = "swimwear",
"knotted back body wrap top" = "swimwear",
".*lace.*bodysuit.*" = "lingerie",
".*panties.*" = "panties",
".*triangle.*" = "panties",
".*slip.*" = "sleep wear",
"sunnie full coverage" = "bra",
".*one piece.*" = "swimwear",
".*sport.*" = "sport",
"logo elastic short" = "sleepwear",
".*tee.*" = "sleepwear",
"lightly lined macramé high-neck" = "swimwear",
".*racerback.*" = "bra",
".*petal.*" = "accessories",
"deep v crop" = "bra",
".*lace dress.*" = "lingerie",
".*hannah.*" = "bra",
".*full-zip.*" = "sport",
".*hineck.*" = "bra",
".*katie.*" = "bra",
".*longline.*" = "bra",
".*lorna jane.*" = "bra",
"mesh-cap-sleeve bodysuit" = "lingerie",
".*move.*" = "sport",
"new! day to play" = "bra",
"padded" = "bra",
"play" = "bra",
"plunge" = "bra",
"sheer floral lace tunic" = "lingerie",
"split hem tunic" = "sport",
"summer" = "bra",
"sleep wear" = "sleepwear"))
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "accessories",
".*thong.*" = "thong",
".*bikini.*" = "swimwear",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*brief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshort.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*cami.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories",
".*lingerie.*" = "lingerie",
".*push.*" = "bra",
".*tote.*" = "accessories",
".*hipster.*" = "panties",
".*babydoll.*" = "sleep wear",
"wrap triangle top" = "swimwear",
".*tomgirl.*" = "panties",
"ultimate high waist legging" = "sport",
"ultimate pocket legging" = "sport",
"ultimate yoga legging" = "sport",
".*undies.*" = "panties",
".*tank.*" = "sleep wear",
".*demi.*" = "bra",
".*bustier.*" = "bra",
".*brooke.*" = "bra",
".*lace.*" = "lingerie",
"cross-back scoop" = "swimwear",
".*teddy.*" = "lingerie",
".*sleep.*" = "sleep wear",
"embroidered mesh bodysuit" = "lingerie",
".*cheekster.*" = "panties",
".*kimono.*" = "sleep wear",
".*gym.*" = "sport",
".*belt.*" = "accessories",
".*one-piece.*" = "swimwear",
".*onepiece.*" = "swimwear",
".*halter.*" = "swimwear",
"high-neck wrap" = "swimwear",
"knotted back body wrap top" = "swimwear",
".*panties.*" = "panties",
".*triangle.*" = "panties",
".*slip.*" = "sleep wear",
"sunnie full coverage" = "bra",
".*one piece.*" = "swimwear",
".*sport.*" = "sport",
"logo elastic short" = "sleepwear",
".*tee.*" = "sleepwear",
"lightly lined macramé high-neck" = "swimwear",
".*racerback.*" = "bra",
".*petal.*" = "accessories",
"deep v crop" = "bra",
".*hannah.*" = "bra",
".*full-zip.*" = "sport",
".*hineck.*" = "bra",
".*katie.*" = "bra",
".*longline.*" = "bra",
".*lorna jane.*" = "bra",
"mesh-cap-sleeve bodysuit" = "lingerie",
".*move.*" = "sport",
"new! day to play" = "bra",
"padded" = "bra",
"play" = "bra",
"plunge" = "bra",
"split hem tunic" = "sport",
"summer" = "bra",
"sleep wear" = "sleepwear"))
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
which(df$product_category == "collections" & word(df$product_name,-1) == "Panty")
which(df$product_category == "collections" &
word(df$product_name,-1) %in% c("Panty", "Hipster",
"Thong", "Boyshort",
"Tanga", "G-String"))
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-1), "NA")
df$last_word <- as.factor(df$last_word)
df$last_word <- as.factor(df$last_word)
big_categories <- data.frame(levels(df$last_word))
View(big_categories)
big_categories <- data.frame(df$category,levels(df$last_word))
View(big_categories)
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-3), "NA")
df$last_word <- as.factor(df$last_word)
big_categories <- data.frame(levels(df$last_word))
?word
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-3, -1), "NA")
df$last_word <- as.factor(df$last_word)
big_categories <- data.frame(levels(df$last_word))
df$last_word <- df$last_word %>%
as.factor() %>%
str_to_lower()
big_categories <- data.frame(levels(df$last_word))
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-3, -1), "NA")
df$last_word <- df$last_word %>%
as.factor() %>%
str_to_lower()
big_categories <- data.frame(levels(df$last_word))
levels(df$last_word)
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-3, -1), "NA")
df$last_word <-  as.factor(df$last_word)
df$last_word <- str_to_lower(df$last_word)
big_categories <- data.frame(levels(df$last_word))
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-3, -1), "NA")
df$last_word <-  as.factor(df$last_word)
# df$last_word <- str_to_lower(df$last_word)
big_categories <- data.frame(levels(df$last_word))
View(big_categories)
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-4, -1), "NA")
df$last_word <-  as.factor(df$last_word)
# df$last_word <- str_to_lower(df$last_word)
big_categories <- data.frame(levels(df$last_word))
View(big_categories)
which(df$last_word %in% c(".*Bride.*"))
which(df$last_word %in% c(".*Panty.*", ".*Hipster.*",
".*Thong.*", ".*Boyshort.*",
".*V-kini.*", ".*Teddy.*",
".*Tanga.*", ".*G-String.*",
".*Brief.*", ".*Panties.*",
".*Tap Pant.*", ".*thong.*"))
which(df$last_word == ".*Bride.*")
which(str_detect(df$last_word, ".*Bride.*"))
which(str_detect(df$last_word, c(".*Panty.*", ".*Hipster.*",
".*Thong.*", ".*Boyshort.*",
".*V-kini.*", ".*Teddy.*",
".*Tanga.*", ".*G-String.*",
".*Brief.*", ".*Panties.*",
".*Tap Pant.*", ".*thong.*")))
which(str_detect(df$last_word, pattern = ".*Bra.*|.*Bralette.*|.*Bandeau.*|.*Crop.*"))
which(str_detect(df$last_word, pattern = ".*Panty.*|.*Hipster.*|.*Thong.*|.*Boyshort.*|.*V-kini.*|.*Teddy.*|.*Tanga.*|.*G-String.*|.*Brief.*|.*Panties.*|.*Tap Pant.*|.*thong.*"))
str_which(df$last_word, pattern = ".*Panty.*|.*Hipster.*|.*Thong.*|.*Boyshort.*|.*V-kini.*|.*Teddy.*|.*Tanga.*|.*G-String.*|.*Brief.*|.*Panties.*|.*Tap Pant.*|.*thong.*")
panties <- str_which(df$last_word, pattern = ".*Panty.*|.*Hipster.*|.*Thong.*|.*Boyshort.*|.*V-kini.*|.*Teddy.*|.*Tanga.*|.*G-String.*|.*Brief.*|.*Panties.*|.*Tap Pant.*|.*thong.*")
bra <- str_which(df$last_word, pattern = ".*Bra.*|.*Bralette.*|.*Bandeau.*|.*Crop.*")
bride <- str_which(df$last_word, pattern = ".*Bride.*")
sleepwear <- str_which(df$last_word, pattern = ".*Chemise.*|.*Cami.*|.*Top.*|.*T-Shirt.*|.*Slip.*|.*Sleep.*|.*Tank.*|.*Robe.*|.*Gown.*|.*Pajamas.*")
accessories <- str_which(df$last_word, pattern = ".*Sock.*|.*Leg.*|.*Cuff.*|.*Plaything.*")
swimwear <- str_which(df$last_word, pattern = ".*Bikini.*")
lingerie <- str_which(df$last_word, pattern = ".*Bodysuit.*|.*Slit.*")
df$category[panties] <- "panties"
df$category[bra] <- "bra"
df$category[bride] <- "bride"
df$category[sleepwear] <- "sleepwear"
df$category[accessories] <- "accessories"
df$category[swimwear] <- "swimwear"
df$category[lingerie] <- "lingerie"
View(category)
View(grouped_category)
View(df)
grouped_category <- data.frame(levels(df$category))
View(grouped_category)
typeof(df$category)
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
View(grouped_category)
df$last_word <- ifelse(df$product_category %in% c("collections", "chill"),
word(df$product_name,-4, -1), "NA")
df$last_word <-  as.factor(df$last_word)
# df$last_word <- str_to_lower(df$last_word)
big_categories <- data.frame(levels(df$last_word))
View(big_categories)
str_which(df$category, pattern = "chill")
str_which(df$last_word, pattern = ".*Bikini.*")
str_which(df$category, pattern = "chill")
str_which(df$category, pattern = "collection")
str_which(df$category, pattern = "collections")
df$product_name[str_which(df$category, pattern = "collections"),]
collection <- df$product_name[str_which(df$category, pattern = "collections")]
collection <- df[str_which(df$category, pattern = "collections"),]
View(collection)
df <- df %>%
mutate(last_word = ifelse(df$category %in% c("collections", "chill"), word(df$product_name,-4, -1), "NA"))
df$last_word <-  as.factor(df$last_word)
# df$last_word <- str_to_lower(df$last_word)
big_categories <- data.frame(levels(df$last_word))
View(big_categories)
df <- df %>%
mutate(last_word = ifelse(df$category %in% c("collections", "chill"), word(df$product_name,-6, -1), "NA"))
panties <- str_which(df$last_word, pattern = ".*G-.*|.*V-.*|.*Panty.*|.*Hipster.*|.*Thong.*|.*Boyshort.*|.*Teddy.*|.*Tanga.*|.*Brief.*|.*Panties.*|.*Tap Pant.*|.*thong.*")
bra <- str_which(df$last_word, pattern = ".*Bra.*|.*Bralette.*|.*Bandeau.*|.*Crop.*")
bride <- str_which(df$last_word, pattern = ".*Bride.*")
sleepwear <- str_which(df$last_word, pattern = ".*Chemise.*|.*Cami.*|.*Top.*|.*T-Shirt.*|.*Slip.*|.*Sleep.*|.*Tank.*|.*Robe.*|.*Gown.*|.*Pajamas.*|.*Short.*|.*Pant.*")
accessories <- str_which(df$last_word, pattern = ".*Sock.*|.*Garter.*|.*Cuff.*|.*Plaything.*")
swimwear <- str_which(df$last_word, pattern = ".*Bikini.*")
lingerie <- str_which(df$last_word, pattern = ".*Bodysuit.*|.*Slit.*")
df$category[panties] <- "panties"
df$category[bra] <- "bra"
df$category[bride] <- "bride"
df$category[sleepwear] <- "sleepwear"
df$category[accessories] <- "accessories"
df$category[swimwear] <- "swimwear"
df$category[lingerie] <- "lingerie"
grouped_category <- data.frame(levels(df$category))
collection <- df[str_which(df$category, pattern = "collections"),]
View(collection)
# df$last_word <- str_to_lower(df$last_word)
big_categories <- data.frame(levels(df$last_word))
str_which(df$category, pattern = "collections")
df$last_word <-  as.string(df$last_word)
df$last_word <-  as.character(df$last_word)
df <- df %>%
mutate(last_word = ifelse(df$category %in% c("collections", "chill"), word(df$product_name,-6, -1), "NA"))
df$last_word
big_categories <- data.frame(levels(df$last_word))
file_path <- paste("../data/raw/",files, sep = "")
file_path <- paste("../data/raw/",files, sep = "")
library(tidyverse)
library(tidyverse)
# read in data
files <-  list.files(path = "../data/raw/", pattern = "*.csv")
file_path <- paste("../data/raw/",files, sep = "")
raw_df <-  do.call(rbind, lapply(file_path, function(x) read.csv(x, row.names = NULL, stringsAsFactors = FALSE)))
setwd("~/Desktop/labs/shiny-innerwear-retail")
library(tidyverse)
# read in data
files <-  list.files(path = "../data/raw/", pattern = "*.csv")
file_path <- paste("../data/raw/",files, sep = "")
raw_df <-  do.call(rbind, lapply(file_path, function(x) read.csv(x, row.names = NULL, stringsAsFactors = FALSE)))
getwd()
