library(tidyverse)
# read in data
files <-  list.files(path = "data/raw/", pattern = "*.csv")
# read in data
files <-  list.files(path = "../data/raw/", pattern = "*.csv")
file_path <- paste("../data/raw/",files, sep = "")
raw_df <-  do.call(rbind, lapply(file_path, function(x) read.csv(x, row.names = NULL, stringsAsFactors = FALSE)))
View(raw_df)
raw_df$mrp <- gsub("usd", "", raw_df$mrp, ignore.case = TRUE)
raw_df$mrp <- trimws(raw_df$mrp, which = "right")
raw_df$price <- gsub("usd", "", raw_df$price, ignore.case = TRUE)
raw_df$price <- trimws(raw_df$price, which = "right")
class(raw_df$mrp)
files <-  list.files(path = "../data/raw/", pattern = "*.csv")
file_path <- paste("../data/raw/",files, sep = "")
raw_df <-  do.call(rbind, lapply(file_path, function(x) read.csv(x, row.names = NULL, stringsAsFactors = FALSE)))
## delete "USD" from mrp and price, transform them to numeric
raw_df$mrp <- raw_df$mrp %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
raw_df$mrp <- as.numeric(raw_df$mrp)
files <-  list.files(path = "../data/raw/", pattern = "*.csv")
file_path <- paste("../data/raw/",files, sep = "")
raw_df <-  do.call(rbind, lapply(file_path, function(x) read.csv(x, row.names = NULL, stringsAsFactors = FALSE)))
df <- raw_df
df$mrp <- as.numeric(as.character(raw_df$mrp))
View(df)
df$mrp <- as.numeric(as.character(df$mrp))
df$price <- df$price %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
as.numeric(df$mrp)
as.numeric(as.character(df$mrp))
df <- raw_df
df$mrp <- df$mrp %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
as.integer(df$mrp)
df$mrp <- as.integer(df$mrp)
df <- raw_df
df$mrp <- df$mrp %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
as.integer(df$mrp)
as.numeric(df$mrp)
df$price <- df$price %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
df$mrp <- as.numeric(df$mrp)
df$price <- as.numeric(df$mrp)
## combine brand and retailers
df$brand <- paste(df$brand_name, df$retailer, sep = "-")
type(df$retailer)
class(df$retailer)
## combine brand and retailers
as.factor(df$retailer)
## combine brand and retailers
df$retailer <- as.factor(df$retailer)
levels(df$retailer)
df$retailer %>% recode("Ae US" = "American Eagle",
"Btemptd US" = "Wacoal",
"Hankypanky US" = "Hanky Panky",
"Nordstrom US" = "Nordstrom",
"Victoriassecret US" = "Victoria Secret",
"Amazon US" = "Amazon",
"Calvin Klein US" = "Calvin Klein",
"Macys US" = "Macys",
"Topshop US" = "Topshop")
df$retailer <- df$retailer %>% recode("Ae US" = "American Eagle",
"Btemptd US" = "Wacoal",
"Hankypanky US" = "Hanky Panky",
"Nordstrom US" = "Nordstrom",
"Victoriassecret US" = "Victoria Secret",
"Amazon US" = "Amazon",
"Calvin Klein US" = "Calvin Klein",
"Macys US" = "Macys",
"Topshop US" = "Topshop")
as.character(df$retailer)
as.character <- as.character(df$retailer)
## combine brand and retailers
df$brand <- paste(df$brand_name, df$retailer, sep = "-")
## category
typeof(df$product_category)
## category
df$product_category <- as.factor(df$product_category)
levels(df$product_category)
category <- data.frame(levels(df$product_category))
View(category)
View(category)
# category <- data.frame(levels(df$product_category))
df$product_category %>%
str_replace(., ".*Push-up.*", replacement = "Push-Up Bra")
# category <- data.frame(levels(df$product_category))
df$product_category <- df$product_category %>%
str_replace(., ".*Push-up.*", replacement = "Push-Up Bra")
View(raw_df)
# category <- data.frame(levels(df$product_category))
df$category <- df$product_category %>%
str_replace(., ".*Push-up.*", replacement = "Push-Up Bra")
View(df)
## category
df$category <- as.factor(df$category)
levels(df$category)
data.frame(levels(df$category))
category <- data.frame(levels(df$category))
View(category)
df <- raw_df
# clean data
## mrp and price
df$mrp <- df$mrp %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
df$mrp <- as.numeric(df$mrp)
df$price <- df$price %>%
gsub("usd", "", ., ignore.case = TRUE) %>%
trimws(., which = "right")
df$price <- as.numeric(df$mrp)
## brand and retailers
df$retailer <- as.factor(df$retailer)
df$retailer <- df$retailer %>% recode("Ae US" = "American Eagle",
"Btemptd US" = "Wacoal",
"Hankypanky US" = "Hanky Panky",
"Nordstrom US" = "Nordstrom",
"Victoriassecret US" = "Victoria Secret",
"Amazon US" = "Amazon",
"Calvin Klein US" = "Calvin Klein",
"Macys US" = "Macys",
"Topshop US" = "Topshop")
as.character <- as.character(df$retailer)
df$brand <- paste(df$brand_name, df$retailer, sep = "-")
View(df)
## category
df$category <- as.factor(df$category)
category <- data.frame(levels(df$category))
## category
df$product_category <- as.factor(df$product_category)
category <- data.frame(levels(df$product_category))
View(category)
View(category)
".*Thong.*" = "Thong")
# category <- data.frame(levels(df$product_category))
df$product_category %>%
str_replace_all(., c(".*Bra*" = "Bra",
".*Sock.*" = "Sock",
".*Thong.*" = "Thong"))
# category <- data.frame(levels(df$product_category))
df$product_category %>%
str_replace_all(., c(".*Bra*" = "Bra",
".*Bras*" = "Bra",
".*Sock.*" = "Sock",
".*Thong.*" = "Thong"))
# category <- data.frame(levels(df$product_category))
df$product_category %>%
str_replace_all(., c(".*Bra.*" = "Bra",
".*Sock.*" = "Sock",
".*Thong.*" = "Thong"))
# category <- data.frame(levels(df$product_category))
df$product_category %>%
str_replace(., c(".*Bra.*" = "Bra",
".*Sock.*" = "Sock",
".*Thong.*" = "Thong"))
df$product_category %>%
str_to_lower()
df$product_category <- df$product_category %>%
str_to_lower()
df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "bikini",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*boybrief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshorts.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport bra",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*chiffon cami & short set.*" = "sleep wear",
".*chiffon & lace slip.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories"))
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "bikini",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*boybrief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshorts.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport bra",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*chiffon cami & short set.*" = "sleep wear",
".*chiffon & lace slip.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories"))
View(category)
df
View(category)
typeof(df$category)
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
View(grouped_category)
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "bikini",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*boybrief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshorts.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport bra",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*chiffon cami & short set.*" = "sleep wear",
".*chiffon & lace slip.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories",
".*lingerie.*" = "lingerie",
".*push.*" = "bra",
".*tote.*" = "accessories",
".*hipster.*" = "panties",
".*babydoll.*" = "sleep wear",
"wrap triangle top" = "swimwear",
".*tomgirl.*" = "panties"))
grouped_category <- data.frame(levels(df$category))
df$category
grouped_category <- data.frame(levels(df$category))
typeof(df$category)
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
View(grouped_category)
df$category <- df$product_category %>%
str_replace_all(., c(".*bra.*" = "bra",
".*sock.*" = "sock",
".*thong.*" = "thong",
".*bikini.*" = "bikini",
".*sunnie wireless.*" = "bra",
".*bralette.*" = "bralette",
".*bandeau.*" = "bra",
".*boybrief.*" = "panties",
".*hat.*" = "accessories",
".*cheeky.*" = "panties",
".*hiphugger.*" = "panties",
".*shortie.*" = "panties",
".*boyshorts.*" = "panties",
".*bridal.*" = "bridal",
".*sport bra.*" = "sport",
".*bridget.*" = "bra",
".*audrey.*" = "bra",
".*accessories.*" = "accessories",
".*brooke.*" = "brooke",
".*bottle.*" = "accessories",
".*cheekies.*" = "panties",
".*chiffon cami & short set.*" = "sleep wear",
".*chiffon & lace slip.*" = "sleep wear",
"cage front high-neck crop" = "swimwear",
".*panty.*" = "panties",
"coconut waters travel kit" = "accessories",
".*lingerie.*" = "lingerie",
".*push.*" = "bra",
".*tote.*" = "accessories",
".*hipster.*" = "panties",
".*babydoll.*" = "sleep wear",
"wrap triangle top" = "swimwear",
".*tomgirl.*" = "panties",
"xo lace teddy" = "lingerie",
"ultimate high waist legging" = "sport",
"ultimate pocket legging" = "sport",
"ultimate yoga legging" = "sport",
".*undies.*" = "panties",
".*tank.*" = "sleep wear",
".*demi.*" = "bra",
".*bustier.*" = "bra"))
df$category <- as.factor(df$category)
grouped_category <- data.frame(levels(df$category))
View(grouped_category)
